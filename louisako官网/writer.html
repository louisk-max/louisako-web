<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L.K. Terminal å‘å¸ƒå° (å›¾ç‰‡ç‰ˆ)</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #f0f2f5; color: #1a1a1a; max-width: 900px; margin: 30px auto; padding: 20px; }
        
        header { text-align: center; margin-bottom: 40px; }
        h1 { color: #0a2540; margin: 0; font-size: 24px; }
        p.subtitle { color: #666; font-size: 14px; margin-top: 5px; }

        .module { background: #fff; border-radius: 12px; padding: 30px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); margin-bottom: 25px; border-left: 5px solid #0a2540; }
        .module h2 { margin-top: 0; font-size: 18px; color: #0a2540; border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 20px; }
        .module-gold { border-left-color: #c5a059; }

        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px; }
        .full-width { grid-column: span 2; }
        
        label { display: block; font-weight: 600; font-size: 13px; color: #555; margin-bottom: 6px; }
        input, select, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box; transition: 0.2s; }
        textarea { height: 80px; font-family: monospace; resize: vertical; }

        /* å›¾ç‰‡ä¸Šä¼ æ¨¡æ‹ŸåŒº */
        .image-input-area { background: #e3f2fd; padding: 15px; border-radius: 8px; border: 1px dashed #2196f3; margin-bottom: 20px; }
        .image-hint { font-size: 12px; color: #1565c0; margin-top: 5px; }

        .step-input-group { background: #f9f9f9; padding: 15px; border-radius: 8px; margin-bottom: 10px; border: 1px solid #eee; }
        .step-badge { display: inline-block; background: #0a2540; color: #fff; width: 20px; height: 20px; text-align: center; line-height: 20px; border-radius: 50%; font-size: 12px; margin-bottom: 5px; }

        .btn-generate { width: 100%; padding: 18px; background: #0a2540; color: #fff; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.2s; margin-top: 20px; }
        .btn-generate:hover { background: #c5a059; }

        #output-area { margin-top: 40px; display: none; }
        pre { background: #282c34; color: #abb2bf; padding: 25px; border-radius: 8px; overflow-x: auto; white-space: pre-wrap; font-family: "Consolas", monospace; font-size: 13px; line-height: 1.5; }
        .copy-hint { background: #e6fffa; color: #004d40; padding: 15px; border-radius: 6px; margin-bottom: 10px; border: 1px solid #b2dfdb; text-align: center; font-weight: bold; }
    </style>
</head>
<body>

    <header>
        <h1>L.K. Terminal å‘å¸ƒå° (Pro v2)</h1>
        <p class="subtitle">æ”¯æŒå›¾ç‰‡è·¯å¾„è‡ªåŠ¨ç”Ÿæˆ</p>
    </header>

    <div class="module">
        <h2>1. åŸºç¡€ä¿¡æ¯ (Meta Info)</h2>
        <div class="form-grid">
            <div><label>å”¯ä¸€ID (å¦‚: gold_nov24)</label><input type="text" id="artId" placeholder="xauusd_nov23"></div>
            <div><label>æ—¥æœŸ (Date)</label><input type="text" id="artDate" value="Nov 23, 2025"></div>
            <div><label>è‹±æ–‡æ ‡é¢˜</label><input type="text" id="titleEn" value="XAUUSD Weekly Order Flow Outlook"></div>
            <div><label>ä¸­æ–‡æ ‡é¢˜</label><input type="text" id="titleCn" value="XAUUSD æœºæ„è®¢å•æµå‘¨åº¦å±•æœ›"></div>
            <div>
                <label>å¤šç©ºè§‚ç‚¹ (Bias)</label>
                <select id="biasType">
                    <option value="Bullish">çœ‹æ¶¨ (Bullish)</option>
                    <option value="Bearish">çœ‹è·Œ (Bearish)</option>
                    <option value="Neutral">éœ‡è¡ (Neutral)</option>
                </select>
            </div>
        </div>
    </div>

    <div class="module">
        <h2>2. å¸‚åœºè„‰æ (Market Pulse)</h2>
        
        <div class="image-input-area">
            <label>ğŸ“Š åˆ†æå›¾æ–‡ä»¶å (Chart Filename)</label>
            <input type="text" id="imgName" placeholder="ä¾‹å¦‚: xau_nov23.png">
            <div class="image-hint">â„¹ï¸ è¯·ç¡®ä¿ä½ æŠŠè¿™å¼ å›¾ç‰‡æ”¾è¿›äº† assets/analysis/ æ–‡ä»¶å¤¹é‡Œã€‚å¦‚æœç•™ç©ºï¼Œå°†æ˜¾ç¤ºé»˜è®¤å ä½ç¬¦ã€‚</div>
        </div>

        <div class="form-grid">
            <div><label>å½“å‰ä»·æ ¼</label><input type="text" id="price" value="$4079.50"></div>
            <div><label>ç»“æ„æ ‡ç­¾</label><input type="text" id="structTag" value="Bullish Structure"></div>
            
            <div class="full-width"><label>ä¸€å¥è¯æ€»ç»“ (CN)</label><input type="text" id="summaryCn" value="åŸºäºå½“å‰ç›˜é¢ç»“æ„ï¼Œé»„é‡‘æ­£åœ¨ç»å†ä¸€æ¬¡æ•™ç§‘ä¹¦å¼çš„ SMC ç§¯ç´¯æ¨¡å‹ã€‚"></div>
            <div class="full-width"><label>ä¸€å¥è¯æ€»ç»“ (EN)</label><input type="text" id="summaryEn" value="Based on the structure, Gold is undergoing a textbook SMC accumulation model."></div>

            <div class="full-width"><label>æ ¸å¿ƒé€»è¾‘ - ä¸­æ–‡ (æ¯è¡Œä¸€ç‚¹)</label><textarea id="logicCn" placeholder="æµåŠ¨æ€§çŒæ€: ..."></textarea></div>
            <div class="full-width"><label>æ ¸å¿ƒé€»è¾‘ - è‹±æ–‡ (æ¯è¡Œä¸€ç‚¹)</label><textarea id="logicEn" placeholder="Liquidity Sweep: ..."></textarea></div>
        </div>
    </div>

    <div class="module module-gold">
        <h2>3. æ‰§è¡Œè®¡åˆ’ (Execution Plan)</h2>
        <div class="form-grid">
            <div class="full-width"><label>å‰§æœ¬åç§° (CN/EN)</label><input type="text" id="scenCn" value="é€¢ä½åšå¤š" style="width:48%; display:inline-block"> <input type="text" id="scenEn" value="Buy the Dip" style="width:48%; display:inline-block"></div>
        </div>

        <div class="step-input-group"><span class="step-badge">1</span> <label>æ­¥éª¤ä¸€</label>
            <div class="form-grid" style="margin-top:5px;"><input type="text" id="s1TitleCn" placeholder="CN Title"><input type="text" id="s1DescCn" placeholder="CN Desc"><input type="text" id="s1TitleEn" placeholder="EN Title"><input type="text" id="s1DescEn" placeholder="EN Desc"></div>
        </div>
        <div class="step-input-group"><span class="step-badge">2</span> <label>æ­¥éª¤äºŒ</label>
            <div class="form-grid" style="margin-top:5px;"><input type="text" id="s2TitleCn" placeholder="CN Title"><input type="text" id="s2DescCn" placeholder="CN Desc"><input type="text" id="s2TitleEn" placeholder="EN Title"><input type="text" id="s2DescEn" placeholder="EN Desc"></div>
        </div>
        <div class="step-input-group"><span class="step-badge">3</span> <label>æ­¥éª¤ä¸‰</label>
            <div class="form-grid" style="margin-top:5px;"><input type="text" id="s3TitleCn" placeholder="CN Title"><input type="text" id="s3DescCn" placeholder="CN Desc"><input type="text" id="s3TitleEn" placeholder="EN Title"><input type="text" id="s3DescEn" placeholder="EN Desc"></div>
        </div>
        <div class="full-width"><label>ç›®æ ‡ä½</label><input type="text" id="targets" value="TP1: $4150 / TP2: $4200"></div>
    </div>

    <button class="btn-generate" onclick="generateCode()">ç”Ÿæˆä»£ç  (Generate Code)</button>

    <div id="output-area">
        <div class="copy-hint">âœ… ä»£ç å·²ç”Ÿæˆï¼ç›´æ¥å¤åˆ¶ï¼Œç²˜è´´åˆ° analysis.html çš„ reports æ•°ç»„é‡Œã€‚</div>
        <pre id="codeResult"></pre>
    </div>

    <script>
        function generateCode() {
            const id = document.getElementById('artId').value;
            const date = document.getElementById('artDate').value;
            const titleEn = document.getElementById('titleEn').value;
            const titleCn = document.getElementById('titleCn').value;
            const bias = document.getElementById('biasType').value;
            
            const imgName = document.getElementById('imgName').value.trim();
            const price = document.getElementById('price').value;
            const structTag = document.getElementById('structTag').value;
            const summaryEn = document.getElementById('summaryEn').value;
            const summaryCn = document.getElementById('summaryCn').value;

            // å¤„ç†é€»è¾‘åˆ—è¡¨
            const processBullets = (text) => text ? '<ul>' + text.split('\n').map(l => `<li>${l}</li>`).join('') + '</ul>' : '';
            const logicHtmlEn = processBullets(document.getElementById('logicEn').value);
            const logicHtmlCn = processBullets(document.getElementById('logicCn').value);

            // è·å–æ­¥éª¤
            const getStep = (n) => ({
                te: document.getElementById(`s${n}TitleEn`).value, de: document.getElementById(`s${n}DescEn`).value,
                tc: document.getElementById(`s${n}TitleCn`).value, dc: document.getElementById(`s${n}DescCn`).value
            });
            const s1 = getStep(1); const s2 = getStep(2); const s3 = getStep(3);
            const scenEn = document.getElementById('scenEn').value;
            const scenCn = document.getElementById('scenCn').value;
            const targets = document.getElementById('targets').value;

            // é¢œè‰²å®šä¹‰
            let dotColor = "var(--text-muted)";
            let tagClass = "neutral";
            if(bias === "Bullish") { dotColor = "var(--green)"; tagClass = "bullish"; }
            if(bias === "Bearish") { dotColor = "var(--red)"; tagClass = "bearish"; }

            // ğŸ’¡ æ™ºèƒ½å›¾è¡¨é€»è¾‘
            let chartHtml = '';
            if (imgName) {
                // å¦‚æœå¡«äº†æ–‡ä»¶åï¼Œç”Ÿæˆå›¾ç‰‡æ ‡ç­¾
                chartHtml = `<div class="chart-container"><img src="assets/analysis/${imgName}" alt="Market Chart" loading="lazy"></div>`;
            } else {
                // å¦‚æœæ²¡å¡«ï¼Œç”Ÿæˆå ä½ç¬¦
                chartHtml = `<div class="chart-placeholder"><p>[ Chart Area ]</p></div>`;
            }

            const template = `
            {
                id: "${id}",
                date: "${date}",
                title: { en: "${titleEn}", cn: "${titleCn}" },
                content: \`
                    <div class="report-header-content">
                        <div class="lang-cn">
                            <h1 class="rh-title">${titleCn}</h1>
                            <div class="rh-meta">ğŸ“… å‘å¸ƒ: ${date} &nbsp;|&nbsp; <span style="color:${dotColor}">â—</span> è§‚ç‚¹: ${bias}</div>
                        </div>
                        <div class="lang-en">
                            <h1 class="rh-title">${titleEn}</h1>
                            <div class="rh-meta">ğŸ“… Date: ${date} &nbsp;|&nbsp; <span style="color:${dotColor}">â—</span> Bias: ${bias}</div>
                        </div>
                    </div>

                    <section>
                        <div class="lang-cn"><h2>01. æœ¬å‘¨å¸‚åœºåˆ†æ (Market Pulse)</h2></div>
                        <div class="lang-en"><h2>01. Market Pulse Analysis</h2></div>

                        <div class="card">
                            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; flex-wrap:wrap; gap:10px;">
                                <div><span class="price-highlight">${price}</span><span class="price-sub"> / GC1! Futures</span></div>
                                <div><span class="tag ${tagClass}">${structTag}</span></div>
                            </div>
                            
                            <div class="lang-cn"><p>${summaryCn}</p></div>
                            <div class="lang-en"><p>${summaryEn}</p></div>
                            
                            ${chartHtml}

                            <div class="lang-cn"><h3>ğŸ“Š æ ¸å¿ƒé€»è¾‘å¤ç›˜</h3>${logicHtmlCn}</div>
                            <div class="lang-en"><h3>ğŸ“Š Core Logic Review</h3>${logicHtmlEn}</div>
                        </div>
                    </section>

                    <section>
                        <div class="lang-cn"><h2>02. å®æˆ˜æ‰§è¡Œ (Execution)</h2></div>
                        <div class="lang-en"><h2>02. Execution Plan</h2></div>
                        
                        <div class="card">
                            <div class="lang-cn"><h3>ğŸ“ˆ å‰§æœ¬ï¼š${scenCn}</h3></div>
                            <div class="lang-en"><h3>ğŸ“ˆ Scenario: ${scenEn}</h3></div>

                            <div class="step"><div class="step-num">1</div><div class="lang-cn"><strong>${s1.tc}:</strong> ${s1.dc}</div><div class="lang-en"><strong>${s1.te}:</strong> ${s1.de}</div></div>
                            <div class="step"><div class="step-num">2</div><div class="lang-cn"><strong>${s2.tc}:</strong> ${s2.dc}</div><div class="lang-en"><strong>${s2.te}:</strong> ${s2.de}</div></div>
                            <div class="step"><div class="step-num">3</div><div class="lang-cn"><strong>${s3.tc}:</strong> ${s3.dc}</div><div class="lang-en"><strong>${s3.te}:</strong> ${s3.de}</div></div>
                            <hr>
                            <p><strong>ğŸ¯ Targets:</strong> ${targets}</p>
                        </div>
                    </section>
                \`
            },`;

            document.getElementById('codeResult').innerText = template;
            document.getElementById('output-area').style.display = 'block';
        }
    </script>
</body>
</html>